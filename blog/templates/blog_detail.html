{% extends 'base.html' %}

{% block content %}
  <article>
    <h1>{{ blog.title }}</h1>
    <p>{{ blog.content }}</p>
  </article>


  <h3>Comments</h3>

  {% if comments %}
    <ul class="comment-list">
      {% for comment in comments %}
        <li class="comment">
          <p>{{ comment.text }}</p>
            <a href="{% url 'edit_comment' comment.id %}">Edit</a>
            <form action="{% url 'delete_comment' comment.id %}" method="post">
              {% csrf_token %}
              <input type="hidden" name="confirmation_code" value="DELETE">
              <input type="submit" value="Delete Blog" onclick="return confirm('Are you sure you want to delete this blog?')">
            </form>
        </li>
      {% endfor %}
    </ul>
  {% else %}
    <p>No comments yet.</p>
  {% endif %}

  <h3>Add a Comment</h3>
  <form method="post" action="{% url 'add_comment' blog.id %}">
    {% csrf_token %}
    {{ comment_form.as_p }}
    <button type="submit">Submit</button>
  </form>

{% endblock content %}
