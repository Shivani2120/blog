{% extends 'base.html' %}

{% block content %}
  <article>
    <h1>{{ blog.title }}</h1>
    <p>{{ blog.content }}</p>
  </article>

  <section>
    <h3>Comments</h3>
    {% for comment in blog.comment_set.all %}
      <p><strong>{{ comment.author }}:</strong> {{ comment.text }}</p>
      <h2>
        <form action="{% url 'delete_comment' blog.id %}" method="post">
            {% csrf_token %}
            <input type="hidden" name="confirmation_code" value="DELETE">
            <button type="submit" onclick="return confirm('Are you sure you want to delete this comment?')">Delete comment</button>
        </form>
    </h2>
    {% empty %}
      <p>No comments yet.</p>
    {% endfor %}
  </section>

  <section>
    <h3>Add a Comment</h3>
    <form method="POST" action="{% url 'add_comment' blog.id %}">
      {% csrf_token %}
      {{ comment_form.as_p }}
      <button type="submit">Submit Comment</button>
    </form>
  </section>
{% endblock content %}
